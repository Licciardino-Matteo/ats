document.addEventListener("DOMContentLoaded", function() {
    document.getElementById("assistenzaForm").addEventListener("submit", function(event) {
        event.preventDefault();

        var nomeCognome = document.getElementById("from_name").value;
        var email = document.getElementById("email").value;
        var oggetto = document.getElementById("oggetto").value;
        var servizio = document.getElementById("servizio").value;
        var problema = document.getElementById("problema").value;
        var maiuscolo_nome_cognome = nomeCognome.toUpperCase();

        // Mostra il messaggio "Inviando..."
        var feedback = document.createElement("p");
        feedback.textContent = "Inviando...";
        document.getElementById("assistenzaForm").appendChild(feedback);
        document.getElementById("assistenzaForm").reset();

        // Invia dati a EmailJS
        emailjs.send("service_yo3wh7k", "template_dl25fi4", {
            nomeCognome: maiuscolo_nome_cognome,
            email: email,
            oggetto: oggetto,
            servizio: servizio,
            problema: problema
        })
        .then(function(response) {
            // Rimuovi il messaggio "Inviando..."
            feedback.parentNode.removeChild(feedback);

            // Mostra un messaggio di successo
            var successMessage = document.createElement("p");
            successMessage.innerHTML = "Messaggio inviato con successo!<br>Controlla la tua posta elettronica " + email;
            document.getElementById("assistenzaForm").appendChild(successMessage);

            console.log("Email inviata con successo!", response);
            // Puoi aggiungere qui ulteriori azioni dopo l'invio dell'email
        }, function(error) {
            // Rimuovi il messaggio "Inviando..." in caso di errore
            feedback.parentNode.removeChild(feedback);

            // Mostra un messaggio di errore
            var errorMessage = document.createElement("p");
            errorMessage.textContent = "Errore durante l'invio del messaggio. Riprova pi√π tardi.";
            document.getElementById("assistenzaForm").appendChild(errorMessage);

            console.error("Errore durante l'invio dell'email: ", error);
            // Puoi aggiungere qui ulteriori azioni in caso di errore
        });
    });
});